.mobile-menu__tray {
  position: absolute;
  top: 0;
  height: var(--mobile-menu-height);
  /* Avoid Chrome to see Safari hack */
  overflow-y: auto;
  touch-action: pan-y;
  background: #fff;
  will-change: transform;

  /* Declarative shadow with position-based opacity */
  --tray-position: 0; /* 0-1 normalized position from JS */
  --tray-shadow-opacity: calc(
    var(--tray-position) * 0.3
  ); /* Scale 0-1 to 0-0.3 */
}

/* Apply spring transition by default */
.mobile-menu__tray {
  transition:
    transform var(--mobile-menu-spring-duration)
      var(--mobile-menu-spring-timing),
    box-shadow var(--mobile-menu-spring-duration)
      var(--mobile-menu-spring-timing);
}

/* Shadow for specific modes - will be controlled by --tray-position from JS */
.mobile-menu--default .mobile-menu__tray,
.mobile-menu--push .mobile-menu__tray,
.mobile-menu--squeeze .mobile-menu__tray {
  box-shadow: 0 0 10px rgba(0, 0, 0, var(--tray-shadow-opacity, 0));
}

/* No transition when dragging or animation disabled */
.mobile-menu--dragging .mobile-menu__tray,
.mobile-menu--animation-disabled .mobile-menu__tray {
  transition: none;
}

@supports (-webkit-touch-callout: none) {
  .mobile-menu__tray {
    /* The hack for Safari */
    height: -webkit-fill-available;
  }
}
